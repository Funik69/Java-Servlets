<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Counter Source code</title>
</head>
<body>
	<div style="align-content:center;">	
		<a href="content.html"><img align="right" src="imgs/return.gif" alt="" ></a>
<h2><b>Source Code for Counter Servlet</b><a href="http://localhost:8080/ssp/Count"><img src="imgs/execute.gif"></a></h2>
<pre>
import java.io.*;
import java.sql.Date;
import java.util.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class Count extends HttpServlet {
    int hitCount;
	public void init()
	{
	try{FileReader fileReader= new FileReader(filename);
			BufferedReader bufferedReader = new BufferedReader(fileReader);
			String initial=bufferedReader.readLine();
			hitCount=Integer.parseInt(initial);
       }catch(FileNotFoundException e){hitCount=0;}
		catch(IOException e){hitCount=0;}
		catch(NumberFormatException e){hitCount=0;}
	}

	public void doGet(HttpServletRequest request,HttpServletResponse response)
		throws ServletException, IOException
	{
		response.setContentType("text/html");
		hitCount++;
		PrintWriter out = response.getWriter();
		String title = "Count of total number of hits";
		String docType
            = &quot;&lt;!doctype html public \&quot;-//w3c//dtd html 4.0 &quot;
              + &quot;transitional//en\&quot;&gt;\n&quot;;
  
        out.println(
            docType + &quot;&lt;html&gt;\n&quot;
            + &quot;&lt;head&gt;&lt;title&gt;&quot; + title + &quot;&lt;/title&gt;&lt;/head&gt;\n&quot;
            + &quot;&lt;body&quot;&gt;\n&quot;
            + &quot;&lt;h1&gt;&quot; + title + &quot;&lt;/h1&gt;\n&quot;
            + &quot;&lt;h2&gt;&quot; + hitCount
            + &quot;&lt;/h2&gt;\n&quot;
            + &quot;&lt;/body&gt;&quot;
            + &quot;&lt;/html&gt;&quot;);
	}

	public void destroy(){
		try{FileWriter fileWriter=new FileWriter(filename);
			String countStr= Integer.toString(hitCount);
			fileWriter.write(countStr);
			fileWriter.close();
		}catch(IOException e){
			e.printStackTrace();
		}
	}
}

</pre>
</div>


</body>
</html>

